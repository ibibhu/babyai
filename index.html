<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Amrita & Bikram's Baby Boy ğŸ‘¶</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<!-- Shared init + Google Auth (replaces all firebase config in each file) -->
<script src="firebase-init.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg:           #0c0a18;
      --surface:      rgba(255,255,255,0.042);
      --surface2:     rgba(255,255,255,0.065);
      --border:       rgba(255,255,255,0.09);
      --border-warm:  rgba(255,185,200,0.32);
      --text:         #f5f0ff;
      --muted:        rgba(210,200,255,0.42);
      --accent:       #ffb7c5;
      --accent2:      #bfb0f8;
      --accent-dim:   rgba(255,183,197,0.11);
      --reject:       #ff8fa3;
      --reject-dim:   rgba(255,143,163,0.11);
      --like:         #7de8be;
      --like-dim:     rgba(125,232,190,0.11);
      --radius:       20px;
      --font-display: 'Cormorant Garamond', Georgia, serif;
      --font-body:    'Nunito', sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-body);
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 28px 16px 60px;
      overflow-x: hidden;
    }

    /* Deep space gradient background */
    body::before {
      content: '';
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
      background:
        radial-gradient(ellipse 70% 55% at 15% 8%,   rgba(110,70,210,0.30) 0%, transparent 65%),
        radial-gradient(ellipse 55% 45% at 85% 75%,  rgba(255,120,170,0.18) 0%, transparent 60%),
        radial-gradient(ellipse 45% 35% at 70% 15%,  rgba(70,90,220,0.14)  0%, transparent 55%),
        radial-gradient(ellipse 60% 50% at 40% 95%,  rgba(100,60,180,0.12) 0%, transparent 60%),
        #0c0a18;
    }

    /* Twinkling stars */
    .star {
      position: fixed;
      border-radius: 50%;
      background: white;
      pointer-events: none;
      z-index: 0;
      animation: twinkle var(--dur, 3s) var(--delay, 0s) ease-in-out infinite;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0.15; transform: scale(0.7); }
      50%       { opacity: 0.9;  transform: scale(1.3); }
    }

    .wrap {
      position: relative; z-index: 1;
      width: 100%; max-width: 420px;
      display: flex; flex-direction: column; align-items: center;
      gap: 16px;
    }

    /* â”€â”€ Header â”€â”€ */
    header {
      text-align: center;
      padding-top: 16px;
      animation: fadeDown 0.7s ease both;
    }
    .baby-emoji {
      display: block;
      font-size: 60px; line-height: 1;
      margin-bottom: 12px;
      filter: drop-shadow(0 0 22px rgba(255,183,197,0.65));
      animation: float 4.5s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0);    }
      50%       { transform: translateY(-9px); }
    }
    header h1 {
      font-family: var(--font-display);
      font-size: 32px; font-weight: 700;
      line-height: 1.25; letter-spacing: 0.3px;
      background: linear-gradient(140deg, #fff 10%, var(--accent) 55%, var(--accent2) 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    header p {
      font-size: 10px; color: var(--muted);
      margin-top: 7px; letter-spacing: 2.5px; text-transform: uppercase;
    }
    @keyframes fadeDown {
      from { opacity: 0; transform: translateY(-14px); }
      to   { opacity: 1; transform: translateY(0);     }
    }

    /* â”€â”€ Progress bar â”€â”€ */
    .progress-wrap {
      width: 100%; height: 3px;
      background: rgba(255,255,255,0.07);
      border-radius: 99px; overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent2), var(--accent));
      border-radius: 99px;
      transition: width 0.5s cubic-bezier(.4,0,.2,1);
      box-shadow: 0 0 12px rgba(255,183,197,0.55);
    }

    #syncStatus {
      font-size: 10px; color: var(--muted);
      letter-spacing: 0.5px; align-self: flex-end;
      margin-top: -8px;
    }

    /* â”€â”€ Error banner â”€â”€ */
    #errorBanner {
      display: none; width: 100%;
      background: rgba(255,100,130,0.07);
      border: 1px solid rgba(255,100,130,0.28);
      border-radius: 14px; padding: 14px 16px;
      font-size: 12.5px; color: #ff9ab0; line-height: 1.75;
    }
    #errorBanner strong { color: #ffb5c8; }
    #errorBanner code   { font-size: 11px; opacity: 0.75; }

    /* â”€â”€ Swipe card â”€â”€ */
    .card {
      width: 100%;
      background: rgba(255,255,255,0.038);
      backdrop-filter: blur(28px); -webkit-backdrop-filter: blur(28px);
      border: 1px solid var(--border-warm);
      border-radius: var(--radius);
      padding: 38px 28px 28px;
      text-align: center;
      position: relative; overflow: hidden;
      box-shadow:
        0 0 0 1px rgba(255,255,255,0.035) inset,
        0 28px 60px rgba(0,0,0,0.45),
        0 0 80px rgba(255,183,197,0.06);
      animation: fadeUp 0.55s 0.05s ease both;
    }
    /* Top shimmer line */
    .card::before {
      content: '';
      position: absolute; top: 0; left: 0; right: 0; height: 1px;
      background: linear-gradient(90deg, transparent, var(--accent) 35%, var(--accent2) 65%, transparent);
      opacity: 0.75;
    }
    /* Inner glow blob */
    .card::after {
      content: '';
      position: absolute; top: -50px; left: 50%; transform: translateX(-50%);
      width: 220px; height: 180px;
      background: radial-gradient(ellipse, rgba(191,176,248,0.14) 0%, transparent 70%);
      pointer-events: none;
    }

    .card.animate-left  { animation: swipeLeft  0.3s cubic-bezier(.55,0,.7,1) forwards; }
    .card.animate-right { animation: swipeRight 0.3s cubic-bezier(.55,0,.7,1) forwards; }
    @keyframes swipeLeft  { to { transform: translateX(-28px) rotate(-2.5deg); opacity: 0; } }
    @keyframes swipeRight { to { transform: translateX( 28px) rotate( 2.5deg); opacity: 0; } }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(18px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .index-info {
      font-size: 10px; color: var(--muted);
      letter-spacing: 2.5px; text-transform: uppercase;
      margin-bottom: 22px;
    }
    .name-display {
      font-family: var(--font-display);
      font-size: 56px; font-weight: 700;
      letter-spacing: -0.5px; line-height: 1.05;
      margin-bottom: 10px;
      background: linear-gradient(150deg, #fff 20%, var(--accent) 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .meta-display {
      font-size: 13px; color: var(--muted);
      margin-bottom: 30px; font-weight: 500; letter-spacing: 0.2px;
    }
    .meta-display span { color: var(--accent); }

    /* â”€â”€ Action buttons â”€â”€ */
    .buttons { display: flex; gap: 12px; }

    .btn {
      flex: 1; padding: 14px 10px; border-radius: 14px;
      border: 1px solid transparent;
      font-family: var(--font-body); font-size: 13px; font-weight: 700;
      cursor: pointer; letter-spacing: 0.4px;
      position: relative; overflow: hidden;
      transition: transform 0.15s ease, box-shadow 0.2s ease, background 0.15s;
    }
    /* glass sheen */
    .btn::before {
      content: '';
      position: absolute; inset: 0;
      background: linear-gradient(170deg, rgba(255,255,255,0.1) 0%, transparent 60%);
      border-radius: inherit; pointer-events: none;
    }
    .btn:hover  { transform: translateY(-3px); }
    .btn:active { transform: scale(0.95) translateY(0); }
    .btn:disabled { opacity: 0.22; cursor: default; pointer-events: none; }

    .btn-reject {
      background: var(--reject-dim);
      color: var(--reject);
      border-color: rgba(255,143,163,0.22);
    }
    .btn-reject:hover {
      box-shadow: 0 10px 28px rgba(255,143,163,0.22);
      background: rgba(255,143,163,0.17);
    }
    .btn-like {
      background: var(--like-dim);
      color: var(--like);
      border-color: rgba(125,232,190,0.22);
    }
    .btn-like:hover {
      box-shadow: 0 10px 28px rgba(125,232,190,0.22);
      background: rgba(125,232,190,0.17);
    }

    .btn-undo {
      width: 100%; margin-top: 10px; padding: 10px;
      background: rgba(255,255,255,0.04);
      color: var(--muted);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      font-family: var(--font-body); font-size: 12px; font-weight: 600;
      cursor: pointer; letter-spacing: 0.3px;
      transition: background 0.15s, color 0.15s, transform 0.12s;
    }
    .btn-undo:hover    { background: rgba(255,255,255,0.09); color: var(--text); transform: translateY(-1px); }
    .btn-undo:disabled { opacity: 0.18; cursor: default; pointer-events: none; }

    .status-msg { font-size: 11px; color: var(--muted); margin-top: 10px; min-height: 16px; }

    /* â”€â”€ Sections â”€â”€ */
    .section {
      width: 100%;
      background: rgba(255,255,255,0.035);
      backdrop-filter: blur(18px); -webkit-backdrop-filter: blur(18px);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 22px;
      animation: fadeUp 0.6s ease both;
    }
    .section:nth-of-type(1) { animation-delay: 0.08s; }
    .section:nth-of-type(2) { animation-delay: 0.14s; }
    .section:nth-of-type(3) { animation-delay: 0.20s; }

    .section h2 {
      font-family: var(--font-display);
      font-size: 19px; font-weight: 600; letter-spacing: 0.3px;
      margin-bottom: 15px;
      background: linear-gradient(120deg, var(--accent2), var(--accent));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    form { display: flex; flex-direction: column; gap: 10px; }
    input {
      padding: 11px 14px; border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.1);
      background: rgba(255,255,255,0.06);
      color: var(--text); font-family: var(--font-body); font-size: 13px; font-weight: 500;
      outline: none; transition: border-color 0.2s, box-shadow 0.2s;
    }
    input::placeholder { color: var(--muted); }
    input:focus {
      border-color: rgba(255,183,197,0.55);
      box-shadow: 0 0 0 3px rgba(255,183,197,0.1);
    }

    .btn-add {
      padding: 12px; border-radius: 12px;
      border: 1px solid rgba(255,183,197,0.28);
      background: linear-gradient(135deg, rgba(255,183,197,0.13), rgba(191,176,248,0.13));
      color: var(--accent);
      font-family: var(--font-body); font-size: 13px; font-weight: 700;
      cursor: pointer; letter-spacing: 0.4px;
      transition: background 0.15s, transform 0.12s, box-shadow 0.2s;
    }
    .btn-add:hover {
      background: linear-gradient(135deg, rgba(255,183,197,0.22), rgba(191,176,248,0.22));
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(255,183,197,0.16);
    }
    .hint { font-size: 11px; color: var(--muted); margin-top: 8px; letter-spacing: 0.2px; }

    /* â”€â”€ Lists â”€â”€ */
    .list { display: flex; flex-direction: column; gap: 5px; max-height: 210px; overflow-y: auto; }
    .list::-webkit-scrollbar { width: 3px; }
    .list::-webkit-scrollbar-track { background: transparent; }
    .list::-webkit-scrollbar-thumb { background: rgba(255,183,197,0.28); border-radius: 99px; }

    .list-item {
      display: flex; justify-content: space-between; align-items: center;
      padding: 8px 12px; border-radius: 10px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.06);
      font-size: 13px; font-weight: 500;
      transition: background 0.15s;
    }
    .list-item:hover { background: rgba(255,255,255,0.07); }
    .lname  { color: var(--text); }
    .lright { color: var(--muted); font-size: 12px; }
    .swiped-check { color: var(--accent); margin-left: 5px; }

    /* â”€â”€ Leaderboard â”€â”€ */
    .leader-item {
      display: flex; justify-content: space-between; align-items: center;
      padding: 12px 14px; border-radius: 13px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.07);
      font-size: 13px; gap: 10px; margin-bottom: 5px;
      transition: background 0.15s;
    }
    .leader-item.winner {
      background: linear-gradient(135deg, rgba(255,183,197,0.11), rgba(191,176,248,0.09));
      border-color: rgba(255,183,197,0.28);
      box-shadow: 0 0 24px rgba(255,183,197,0.07);
    }
    .leader-rank  { width: 22px; text-align: center; font-size: 11px; color: var(--muted); font-weight: 600; }
    .leader-name  { flex: 1; font-weight: 600; }
    .leader-score {
      font-family: var(--font-display);
      font-size: 24px; font-weight: 700;
      color: var(--accent);
    }
    .winner-badge {
      font-size: 9px; font-weight: 700;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #1a0e30;
      padding: 3px 8px; border-radius: 99px;
      letter-spacing: 1px; text-transform: uppercase;
    }
    .no-data { font-size: 13px; color: var(--muted); text-align: center; padding: 10px; }
    .done-state .name-display { font-size: 38px; }
  </style>
</head>
<body>

<!-- Twinkling stars (generated by JS below) -->

<div class="wrap">

  <header>
    <span class="baby-emoji">ğŸ‘¶</span>
    <h1>Amrita & Bikram's<br>Baby Boy</h1>
    <p>Vote for your favourite name</p>
  </header>

  <div id="errorBanner"></div>

  <div class="progress-wrap" style="width:100%">
    <div class="progress-bar" id="progressBar" style="width:0%"></div>
  </div>
  <div id="syncStatus">Connectingâ€¦</div>

  <!-- Swipe card -->
  <div class="card" id="card">
    <div class="index-info" id="indexInfo">Loadingâ€¦</div>
    <div class="name-display" id="nameDisplay">â€”</div>
    <div class="meta-display" id="metaDisplay"></div>
    <div class="buttons">
      <button class="btn btn-reject" id="btnLeft"  disabled>âœ• Pass</button>
      <button class="btn btn-like"   id="btnRight" disabled>â™¥ Love it</button>
    </div>
    <button class="btn-undo" id="btnUndo" disabled>â†© Undo last swipe</button>
    <div class="status-msg" id="statusMsg"></div>
  </div>

  <!-- Add name -->
  <div class="section">
    <h2>Add a name</h2>
    <form id="addForm">
      <input id="newName"      placeholder="Name â€” e.g. Advitiya"       required autocomplete="off" />
      <input id="newSuggester" placeholder="Suggested by â€” e.g. Soumya" required autocomplete="off" />
      <button class="btn-add" type="submit">+ Add name</button>
    </form>
    <p class="hint">Votes sync live across all devices via Firestore.</p>
  </div>

  <!-- All names -->
  <div class="section">
    <h2>All names</h2>
    <div class="list" id="allNamesList"><div class="no-data">Loadingâ€¦</div></div>
  </div>

  <!-- Leaderboard -->
  <div class="section">
    <h2>Leaderboard</h2>
    <div class="list" id="scoresList"><div class="no-data">Loadingâ€¦</div></div>
  </div>

</div>

<!-- Stars generator (pure CSS animation, no JS logic) -->
<script>
  (function() {
    const count = 55;
    for (let i = 0; i < count; i++) {
      const s = document.createElement('div');
      s.className = 'star';
      const size = Math.random() * 2 + 1;
      s.style.cssText = `
        width:${size}px; height:${size}px;
        top:${Math.random()*100}vh; left:${Math.random()*100}vw;
        --dur:${(Math.random()*3+2).toFixed(1)}s;
        --delay:-${(Math.random()*4).toFixed(1)}s;
        opacity:0.2;
      `;
      document.body.appendChild(s);
    }
  })();
</script>

<script>

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Default names (written to Firestore on very first run)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const defaultNames = [];

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // App state (currentIndex is per-device, not synced â€” each person
  // swipes through independently; likes/passes are shared globally)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let state      = { names: [], currentIndex: 0 };
  let lastAction = null;

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // UI helpers
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setSyncStatus(msg) { document.getElementById('syncStatus').textContent = msg; }

  function showError(html) {
    const b = document.getElementById('errorBanner');
    b.innerHTML     = 'âš ï¸ ' + html;
    b.style.display = 'block';
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Firestore save  (mirrors your updateReaction pattern)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Backwards-compatible helper: some pages expect a global DOC_REF()
  // while firebase-init.js exposes `window.docRef`. Provide a wrapper
  // so existing code calling `DOC_REF()` keeps working.
  function DOC_REF() {
    if (typeof window === 'undefined') return null;
    if (window.docRef) return window.docRef;
    if (window.fireDb) return window.fireDb.collection('babyNames').doc('state');
    return null;
  }

  async function saveState() {
    const ref = DOC_REF();
    if (!ref) return;
    setSyncStatus('Syncingâ€¦');
    try {
      await ref.set({ names: state.names });
      setSyncStatus('âœ“ Saved');
    } catch (e) {
      setSyncStatus('âš  Sync failed');
      showError('Could not save: <code>' + e.message + '</code>');
    }
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Firestore init  (mirrors your fetchReactions / onSnapshot pattern)
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function initFirestore() {
    const ref = DOC_REF();
    if (!ref) return;
    setSyncStatus('Connectingâ€¦');

    try {
      const doc = await ref.get();
      if (doc.exists && Array.isArray(doc.data().names) && doc.data().names.length > 0) {
        state.names = doc.data().names;
      } else {
        // First ever run â€” seed Firestore with all 49 names
        state.names = defaultNames.map(n => ({...n}));
        await ref.set({ names: state.names });
      }

      setSyncStatus('âœ“ Connected');
      renderAll();

      // Live listener â€” same onSnapshot pattern as your Vue component
      ref.onSnapshot(
        (docSnapshot) => {
          if (docSnapshot.exists) {
            state.names = docSnapshot.data().names;
            renderAll();
          }
        },
        (err) => {
          setSyncStatus('âš  Listener error');
          console.error(err);
        }
      );

    } catch (err) {
      setSyncStatus('âš  Failed');
      showError(
        '<strong>Cannot connect to Firestore.</strong><br><br>' +
        'Steps to fix:<br>' +
        '1. Go to <strong>console.firebase.google.com</strong> â†’ project <strong>bikycaughtitli</strong><br>' +
        '2. Sidebar â†’ <strong>Build â†’ Firestore Database</strong><br>' +
        '3. Click <strong>Create database</strong> â†’ choose <strong>Test mode</strong><br>' +
        '4. Also make sure this file is served via a web server, not opened as a local file.<br><br>' +
        'Error: <code>' + err.message + '</code>'
      );
      // Graceful offline fallback
      state.names = defaultNames.map(n => ({...n}));
      renderAll();
    }
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Compute scores from liked flags
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function computeScores() {
    const s = {};
    for (const item of state.names) {
      if (item.liked) s[item.suggestedBy] = (s[item.suggestedBy] || 0) + 1;
    }
    return s;
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // DOM refs
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const nameDisplay  = document.getElementById('nameDisplay');
  const metaDisplay  = document.getElementById('metaDisplay');
  const indexInfo    = document.getElementById('indexInfo');
  const statusMsg    = document.getElementById('statusMsg');
  const allNamesList = document.getElementById('allNamesList');
  const scoresList   = document.getElementById('scoresList');
  const btnLeft      = document.getElementById('btnLeft');
  const btnRight     = document.getElementById('btnRight');
  const btnUndo      = document.getElementById('btnUndo');
  const progressBar  = document.getElementById('progressBar');
  const card         = document.getElementById('card');

  function currentItem() { return state.names[state.currentIndex] || null; }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Render
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function renderCard() {
    const total       = state.names.length;
    const swipedCount = state.names.filter(n => n.swiped).length;
    progressBar.style.width = total ? `${(swipedCount / total) * 100}%` : '0%';

    if (!total) {
      nameDisplay.textContent = 'No names yet';
      metaDisplay.innerHTML   = '';
      indexInfo.textContent   = 'Add some names below';
      btnLeft.disabled = btnRight.disabled = true;
      return;
    }
    const item = currentItem();
    if (!item) {
      card.classList.add('done-state');
      nameDisplay.textContent = 'All done! ğŸ‰';
      metaDisplay.innerHTML   = `<span>${swipedCount}</span> of ${total} names reviewed`;
      indexInfo.textContent   = '';
      statusMsg.textContent   = '';
      btnLeft.disabled = btnRight.disabled = true;
      return;
    }
    card.classList.remove('done-state');
    nameDisplay.textContent = item.name;
    metaDisplay.innerHTML   = `Suggested by <span>${item.suggestedBy}</span>`;
    indexInfo.textContent   = `${state.currentIndex + 1} of ${total}`;
    statusMsg.textContent   = '';
    btnLeft.disabled = btnRight.disabled = false;
  }

  function renderAllNames() {
    allNamesList.innerHTML = '';
    if (!state.names.length) { allNamesList.innerHTML = `<div class="no-data">No names added yet.</div>`; return; }
    state.names.forEach((item, idx) => {
      const div = document.createElement('div');
      div.className = 'list-item';
      div.innerHTML = `
        <span class="lname">${idx + 1}. ${item.name}</span>
        <span class="lright">${item.suggestedBy}${item.swiped
          ? `<span class="swiped-check">${item.liked ? ' â™¥' : ' âœ•'}</span>` : ''}</span>`;
      allNamesList.appendChild(div);
    });
  }

  function renderScores() {
    scoresList.innerHTML = '';
    const entries = Object.entries(computeScores()).sort((a, b) => b[1] - a[1]);
    if (!entries.length) { scoresList.innerHTML = `<div class="no-data">No likes yet â€” start swiping!</div>`; return; }
    const maxScore = entries[0][1];
    entries.forEach(([person, score], i) => {
      const div = document.createElement('div');
      div.className = `leader-item${score === maxScore ? ' winner' : ''}`;
      div.innerHTML = `
        <span class="leader-rank">${i + 1}</span>
        <span class="leader-name">${person}</span>
        ${score === maxScore ? `<span class="winner-badge">winning</span>` : ''}
        <span class="leader-score">${score}</span>`;
      scoresList.appendChild(div);
    });
  }

  function renderAll() {
    renderCard();
    renderAllNames();
    renderScores();
    btnUndo.disabled = !lastAction;
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Actions
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function animateCard(dir, cb) {
    card.classList.add(dir === 'left' ? 'animate-left' : 'animate-right');
    setTimeout(() => { card.classList.remove('animate-left', 'animate-right'); cb(); }, 280);
  }

  function moveNext() {
    const next = state.currentIndex + 1;
    state.currentIndex = next > state.names.length ? state.names.length : next;
  }

  function swipeLeft() {
    const item = currentItem(); if (!item) return;
    lastAction = { index: state.currentIndex };
    item.swiped = true; item.liked = false;
    animateCard('left', () => { moveNext(); saveState(); renderAll(); });
  }

  function swipeRight() {
    const item = currentItem(); if (!item) return;
    lastAction = { index: state.currentIndex };
    item.swiped = true; item.liked = true;
    animateCard('right', () => { moveNext(); saveState(); renderAll(); });
  }

  function undoLast() {
    if (!lastAction) return;
    const item = state.names[lastAction.index]; if (!item) return;
    item.swiped = false; item.liked = false;
    state.currentIndex = lastAction.index;
    lastAction = null;
    saveState(); renderAll();
  }

  function addName(name, suggestedBy) {
    if (!name.trim() || !suggestedBy.trim()) return;
    state.names.push({ name: name.trim(), suggestedBy: suggestedBy.trim(), swiped: false, liked: false });
    if (state.currentIndex >= state.names.length - 1) state.currentIndex = state.names.length - 1;
    saveState(); renderAll();
  }

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Events
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  btnLeft.addEventListener('click', swipeLeft);
  btnRight.addEventListener('click', swipeRight);
  btnUndo.addEventListener('click', undoLast);

  document.addEventListener('keydown', e => {
    if (e.target.tagName === 'INPUT') return;
    if (e.key === 'ArrowLeft')                   swipeLeft();
    if (e.key === 'ArrowRight')                  swipeRight();
    if (e.key === 'z' && (e.metaKey||e.ctrlKey)) undoLast();
  });

  document.getElementById('addForm').addEventListener('submit', e => {
    e.preventDefault();
    const n = document.getElementById('newName');
    const s = document.getElementById('newSuggester');
    addName(n.value, s.value);
    n.value = s.value = ''; n.focus();
  });

  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Boot
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  //initFirestore();

  firebase.auth().onAuthStateChanged(() => { initFirestore(); });
</script>
</body>
</html>